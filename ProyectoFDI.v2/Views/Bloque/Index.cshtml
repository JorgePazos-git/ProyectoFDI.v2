@model ProyectoFDI.v2.Models.CompetenciaBloqueClasifica

@{
    ViewData["Title"] = "Index";
}

<h1>Bloque</h1>
<h1>@ViewBag.idcompetenciav</h1>

@if (TempData["ErrorMessage"] != null)
{
    <div class="alert alert-danger">@TempData["ErrorMessage"]</div>
}

<form asp-action="Create" onsubmit="return confirmacion()">
    <div class="form-group">
        <label for="deportista">Seleccionar deportista:</label>
        <select class="form-control" id="IdDep" name="IdDep">
            <option value="">Seleccione un deportista</option>
            @foreach (var deportista in ViewBag.ListadoDeportistas)
            {
                <option value="@deportista.IdDep">@deportista.NombresDep @deportista.ApellidosDep</option>
            }
        </select>
    </div>

    <div class="container my-5">
        <div class="row">
            <div class="col-md-6">
                <div class="form-group">
                    <label for="numeroTops">Número de Tops</label>
                    <input type="number" class="form-control" id="TopCla" name="TopCla" min="0" required>
                </div>
                <div class="form-group">
                    <label for="numeroZonas">Número de Zonas</label>
                    <input type="number" class="form-control" id="ZonaCla" name="ZonaCla" min="0" required>
                </div>
            </div>
            <div class="col-md-6">
                <div class="form-group">
                    <label for="intentosTops">Intentos de Tops</label>
                    <input type="number" class="form-control" id="TopIntentosCla" name="TopIntentosCla" min="0" required>
                </div>
                <div class="form-group">
                    <label for="intentosZonas">Intentos de Zonas</label>
                    <input type="number" class="form-control" id="ZonaIntentosCla" name="ZonaIntentosCla" min="0" required>
                </div>
            </div>
        </div>
        <input type="hidden" id="IdCom" name="IdCom" value=@ViewBag.idcompetenciav />

        <button type="submit" class="btn btn-outline-primary float-right">Enviar</button>

    </div>
</form>


<div class="table-responsive">
    <table class="table table-striped">
        <thead>
            <tr>
                <th scope="col">Deportista</th>
                <th scope="col">Tops</th>
                <th scope="col">Zonas</th>
                <th scope="col">Intentos en Tops</th>
                <th scope="col">Intentos en Zona</th>
                <th scope="col">Puesto</th>
                <th scope="col">Clasificación de Bloque</th>
            </tr>
        </thead>
        <tbody>
            @foreach (var competenciaBloque in ViewBag.ListadoDeportistaCompetencia)
            {
                <tr>
                    <td>
                        @{
                            List<Deportistum> a = ViewBag.ListadoDeportistas;
                            Deportistum deportista = a.Find(da => da.IdDep == competenciaBloque.IdDep);
                            if (deportista != null)
                            {
                                @deportista.NombresDep @deportista.ApellidosDep
                            }
                            else
                            {
                                <span class="badge bg-warning">Deportista no encontrado</span>
                            }
                        }
                    </td>
                    <td>@competenciaBloque.TopCla</td>
                    <td>@competenciaBloque.ZonaCla</td>
                    <td>@competenciaBloque.TopIntentosCla</td>
                    <td>@competenciaBloque.ZonaIntentosCla</td>
                    <td>@competenciaBloque.Puesto</td>
                    <td>
                        @if (competenciaBloque.ClasiBloque == null || competenciaBloque.ClasiBloque)
                        {
                            <span class="badge bg-success">Sí</span>
                        }
                        else
                        {
                            <span class="badge bg-danger">No</span>
                        }
                    </td>
                </tr>
            }
        </tbody>
    </table>
</div>


<script>
    function confirmacion() {
        var numTops = document.getElementById("TopCla").value;
        var intentosTops = document.getElementById("TopIntentosCla").value;
        var numZonas = document.getElementById("ZonaCla").value;
        var intentosZonas = document.getElementById("ZonaIntentosCla").value;

        var mensaje = "¿Estás seguro de que quieres enviar el formulario con los siguientes datos?\n\n" +
                      "Número de Tops: " + numTops + "\n" +
                      "Intentos de Tops: " + intentosTops + "\n" +
                      "Número de Zonas: " + numZonas + "\n" +
                      "Intentos de Zonas: " + intentosZonas;

        var respuesta = confirm(mensaje);
        return respuesta; // Devuelve true si el usuario hace clic en Aceptar, y false si hace clic en Cancelar
    }
</script>













